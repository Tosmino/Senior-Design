#include "mcc_generated_files/system.h"

#define CTS _RD6
#define RTS _RF12

void initU2(int BRG)
{
    U2BRG=BRG;
    U2MODE = 0x8000;
    
    U2STA = 0x0400;
    
    TRISFbits.TRISF12=1;
    RTS=1;
}

char putU2(char c)
{
    while(CTS);
    while(U2STAbits.UTXBF);
    U2TXREG = c;
    return c;
}

char getU2(void)
{
    RTS=0;
    while(!U2STAbits.URXDA);
    RTS=1;
    return U2RXREG;
}


int k;
int main(void)
{
    SYSTEM_Initialize();
    initU2(51);

    while (1)
    {
        putU2(0x55);
        for(k=0;k<600;k++);
        putU2(0xB3);
        for(k=0;k<1600;k++);
    }

    return 1;
}