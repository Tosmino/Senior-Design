#include "mcc_generated_files/system.h"

void initADC(int amask)
{
    AD1PCFG=amask;
    
    AD1CON1 = 0x00E0;
    AD1CON2 = 0x0000;
    AD1CON3 = 0x1F01;
    AD1CSSL = 0;
    
    AD1CON1bits.ADON = 1;
}

int readADC(int ch)
{
    AD1CHS = ch;
    AD1CON1bits.SAMP=1;
    while(!(AD1CON1bits.DONE));
    AD1CON1bits.DONE=0;
    
    return ADC1BUF0;
}

int main(void)
{
    SYSTEM_Initialize();
    int temp;
    
    T1CON = 0x8030;
    initADC(0xFFEF);
    TRISA = 0xFF00;

    while (1)
    {
        temp = readADC(4);
        PORTA=temp;
        TMR1=0;while(TMR1<31250);
    }

    return 1;
}